# 项目日志总结
**效果器社群聚合平台 · 开发日志**
**日期：** 2026年2月25日

---

## 第二阶段：信息架构与内容规划

### 阶段背景

承接第一阶段（PRD v0.2 定稿）和爬虫策略调研成果，本阶段目标为产出完整的站点地图与页面内容规划文档，作为后续技术选型的输入依据。

### 关键决策：是否提前确定视觉风格

**讨论结论：** 本阶段不做视觉风格与艺术方向决策。理由如下：

- 视觉风格属于 UI 设计阶段的工作，在技术选型之后进行更合理
- 技术选型（尤其是 UI 框架/组件库选择）会反过来影响设计空间，顺序颠倒容易返工
- 当前阶段聚焦于「把架构和内容先搭好」，为第三阶段技术选型提供清晰输入

**后续行动：** 视觉风格决策推迟到 UI 设计阶段，届时已有具体页面结构作为参考依据。

---

### 信息架构核心产出

#### 网站五大顶级区域

| 区域 | URL | 页面数 | MVP优先级 |
|---|---|---|---|
| 🏠 Home（首页）| / | 1 | P0 |
| 📰 News & Updates（资讯区）| /news | 4 | P0 |
| 🏷️ Brands（品牌区）| /brands | 2 | P0 |
| 💬 Forum（论坛）| /forum | 5 | P1 |
| 👤 Account（账号）| /auth, /u/, /settings | 4 | P0 |
| ⚙️ Admin（后台）| /admin | 4 | P0（内部）|

#### 页面清单（完整）

**资讯区（4页）**
- `/news` — News Feed 资讯列表（筛选、排序、分页）
- `/news/:id` — News Detail 资讯详情（摘要 + 原文链接，不复制全文）
- `/firmware` — Firmware Updates 固件专区
- `/deals` — Deals & Discounts 折扣专区

**品牌区（2页）**
- `/brands` — Brand Directory 品牌目录（字母索引 + 类型筛选）
- `/brands/:slug` — Brand Profile 品牌主页（资讯时间线 + 爬取状态）

**论坛区（5页）**
- `/forum` — Forum Index（6个版块：General / Overdrive / Reverb / Modulation / BST / Feedback）
- `/forum/:board` — Thread List 版块帖子列表
- `/forum/:board/:thread` — Thread Detail 帖子详情
- `/forum/:board/new` — New Thread 发帖页
- `/forum/search` — 全文搜索

**账号区（4页）**
- `/auth` — Login / Register（Google OAuth + Email）
- `/u/:username` — User Profile 公开主页
- `/settings` — Settings 账号设置（含 GDPR 删除/导出入口）
- `/notifications` — Notifications 通知中心

#### 关键设计决策

| 决策点 | 结论 |
|---|---|
| 资讯详情页内容策略 | 仅展示 AI 提取摘要 + 原文链接，不复制全文（版权合规）|
| 用户激励系统 | 极简版：发帖数 + 注册时长，与 PRD v0.2 保持一致 |
| BST 版块 | 预留但标为「后期开放」，降低 MVP 风险 |
| 论坛图片上传 | MVP 不支持，保留扩展接口（与 PRD v0.2 一致）|
| 头像方案 | Gravatar（邮箱 MD5），无需存储图片 |

#### 内容数据模型（核心三张表）

**News Item：** id / brand_id / title / category / summary / source_url / published_at / scraped_at / product_tags / is_visible

**Brand：** id / name / slug / country / description / website_url / logo_url / scrape_method / scrape_status / last_scraped_at

**User：** id / username / email / auth_provider / avatar_hash / post_count / created_at / is_banned / gdpr_delete_requested

#### MVP 优先级划分

| 优先级 | 内容 |
|---|---|
| P0 必做 | 首页、资讯列表/详情、品牌目录/主页、登录注册、后台基础 |
| P1 核心 | 论坛全部页面、固件专区、折扣专区 |
| P2 后期 | 邮件通知、数据导出、BST版块、论坛搜索、积分/等级系统 |

### 本阶段产出文件

| 文件 | 说明 |
|---|---|
| `IA_内容规划_v1.0.docx` | 完整信息架构文档，含站点地图、页面规划、数据模型、优先级表 |
| `IA_内容规划_v1.0.md` | 同上，Markdown 格式版本 |

---

## 第三阶段预研：技术栈选型对比

本阶段同步完成了技术选型的横向对比，供第三阶段确认使用。

### 前端框架对比

| 选项 | 优势 | 劣势 |
|---|---|---|
| **Next.js** ✅ 推荐 | 生态最成熟，学习资料极丰富，AI 辅助友好 | Vercel 绑定感略强 |
| Nuxt 3 | Vue 生态，完整 SSR/SSG | Vue 相对小众，社区资源少于 Next.js |
| SvelteKit | 性能极好，包体积最小 | 社区插件少，遇坑难解决 |

### CSS 方案对比

| 选项 | 优势 | 劣势 |
|---|---|---|
| **Tailwind + DaisyUI** ✅ 推荐 | 开发快，后期主题修改方便，与 Next.js 官方支持 | 需要一定学习曲线 |
| Tailwind 纯 | 自由度最高 | 需要自己组合所有组件 |
| Bootstrap 5 | 开发最快 | 视觉个性低，后期改动麻烦 |

### 后端框架对比

| 选项 | 优势 | 劣势 |
|---|---|---|
| **Python + FastAPI** ✅ 推荐 | 与爬虫同语言，无需维护两套服务；自动生成 API 文档 | 并发性能低于 Go |
| Node.js + Express | 与前端同语言 | 爬虫需独立服务 |
| Node.js + NestJS | 结构规范，适合大型项目 | 学习曲线高，模式复杂 |
| Go + Gin | 性能极好 | 爬虫需独立服务，学习曲线高 |

### 数据库对比

| 选项 | 优势 | 劣势 |
|---|---|---|
| **PostgreSQL（Supabase 托管）** ✅ 推荐 | 关系型数据最合适，原生 JSON 支持，Supabase 自带用户认证 | — |
| MySQL | 同样合适 | JSON 支持弱于 PG |
| MongoDB | JSON 原生 | 关系复杂时不占优 |

### 爬虫调度对比

| 选项 | 优势 | 劣势 |
|---|---|---|
| **APScheduler** ✅ MVP推荐 | 轻量，与 FastAPI 轻松集成 | 失败重试支持较基础 |
| Celery + Redis | 完整任务队列，失败重试 | 复杂度更高 |
| Temporal / Airflow | 企业级工作流 | 过度设计 |

### 部署方案对比

| 选项 | 优势 | 劣势 |
|---|---|---|
| **Railway（后端）+ Vercel（前端）** ✅ MVP推荐 | 免费额度充足，部署简单，适合快速验证 | 流量大后成本上升 |
| VPS 自管（Hetzner 等）| 成本最低，灵活性最高 | 运维负担重 |

### 汇总推荐方案（待第三阶段确认）

| 模块 | 推荐选型 |
|---|---|
| 前端框架 | Next.js |
| CSS | Tailwind CSS + DaisyUI |
| 后端 | Python + FastAPI |
| 数据库 | PostgreSQL（Supabase 托管）|
| 搜索（MVP）| PostgreSQL 内置全文搜索 |
| 爬虫调度（MVP）| APScheduler |
| 前端部署 | Vercel |
| 后端部署 | Railway |

---

## 当前状态 & 下一步

| 阶段 | 状态 | 备注 |
|---|---|---|
| 需求分析与规划（第1阶段）| ✅ 完成 | PRD v0.2 已定稿 |
| 潜在问题调研（第1.5阶段）| ✅ 完成 | 爬虫策略、登录方案、GDPR 均已明确 |
| 信息架构与内容规划（第2阶段）| ✅ 完成 | 站点地图、页面规划、数据模型已产出 |
| 技术栈选型与系统架构（第3阶段）| ⏭️ 待开始 | 已完成预研对比，待正式确认并出文档 |


备注
1.目前还没有开始对第三阶段有什么想法，第二阶段的设计看起来已经较为复杂
2.需要你的看法